{% extends "base.html" %}

{% block title %}Логин{% endblock %}

{% load crispy_forms_tags %}

{% block content %}
{% if user.is_authenticated %}
  <h3 class="text-center">Вы авторизованы, <a class="text-success" href="{% url 'store:categories_list' %}">перейти на главную</a></h3>
{% else %}
  <form method="post" class="col-md-6 mx-auto my-5 py-5">
    <h3 class="text-center">Логин</h3>
    <img src="" class="d-block mb-3 mt-3 rounded-circle mx-auto" style="width: 60px; height: 60px;" id="avatar" alt="">
    <div class="form-group">
      {% csrf_token %}
      <div class="form-group">
        <label for="id_username">Username</label>
        <input type="text" name="username" autofocus="" class="textinput textInput form-control {% if form.username.errors %}is-invalid{% endif %}" value="{% if form.username.value == None %}{% else %}{{ form.username.value }}{% endif %}" required="" id="id_username">
      </div>
      <div class="form-group">
        <label for="id_password">Пароль</label>
        <input type="password" name="password" class="textinput textInput form-control {% if form.password.errors %}is-invalid{% endif %}" value="{{ form.password.value }}" required="" id="id_password">
      </div>
    </div>
    <button type="submit" class="btn btn-primary">Войти</button>
  </form>
  <script>
    document.getElementById('id_username').value = localStorage.getItem("username")
    document.getElementById('id_password').value = localStorage.getItem("password")
    document.getElementById('avatar').src = localStorage.getItem("avatar")
    function countRabbits() {
      var username = document.getElementById("id_username").value;
      var password = document.getElementById("id_password").value;
      localStorage.setItem("username", username)
      localStorage.setItem("password", password)
    }
  </script>
{% endif %}

{% endblock content %}
